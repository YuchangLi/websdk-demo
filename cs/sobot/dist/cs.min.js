var RCS={templateCache:{}};!function(e){var o={$:function(e){return document.querySelectorAll(e)},show:function(e){e.style.display="block"},hide:function(e){e.style.display="none"},removeNode:function(e){var n=o.$(e)[0];n&&n.parentNode.removeChild(n)},getStyle:function(e,n){return e.currentStyle?e.currentStyle[n]||"":window.getComputedStyle?window.getComputedStyle(e,null)[n]:void 0},indexOf:function(e,n){if(e.indexOf)return e.indexOf(n);for(var o=0,t=e.length;o<t;o++)if(e[o]===n)return o;return-1},copy:function(e,n,o,t){for(var s in t=t||function(e){return e},n)(o||void 0===e[s]||null===e[s])&&(e[s]=t(n[s]));return e},isChild:function(e,n){for(;e&&e.tagName&&"body"!=e.tagName.toLowerCase();){if(e==n)return!0;e=e.parentNode}return!1},getTime:function(e){var n=new Date,o=new Date(e);return n.getFullYear()==o.getFullYear()&&n.getMonth()==o.getMonth()&&n.getDate()==o.getDate()?(9<o.getHours()?o.getHours():"0"+o.getHours())+":"+(9<o.getMinutes()?o.getMinutes():"0"+o.getMinutes()):o.getFullYear()+"-"+(8<o.getMonth()?o.getMonth()+1:"0"+(o.getMonth()+1))+"-"+(9<o.getDate()?o.getDate():"0"+o.getDate())+" "+(9<o.getHours()?o.getHours():"0"+o.getHours())+":"+(9<o.getMinutes()?o.getMinutes():"0"+o.getMinutes())},getFileSize:function(e){var n=Math.pow(1024,3),o=Math.pow(1024,2),t=Math.pow(1024,1);return n<e?e=(e/n).toFixed(2)+"G":o<e?e=(e/o).toFixed(2)+"M":t<e?e=(e/t).toFixed(2)+"K":e+="B",e},getFormValue:function(e){for(var n={},o=0;o<e.length;o++)n[e[o]]=document.getElementsByName(e[o])[0].value;return n},fadein:function(e){if(e.style.opacity=0,e.style.display="block",e){var n=0,o=null;o=setInterval(function(){t(e,n+=1),100==n&&clearInterval(o)},1)}},fadeout:function(e){if(e){var n=100,o=null;o=setInterval(function(){t(e,n-=1),0==n&&(e.style.display="none",clearInterval(o))},1)}},downloadHistoryMsgFile:function(e,n){var o=document.createElement("a");o.href=e,o.setAttribute("download",n||""),o.click()},encodeHtmlStr:function(e){for(var n=[{symbol:"&",html:"&amp;"},{symbol:"[\\u0009]",html:"&nbsp;&nbsp;&nbsp;&nbsp; "},{symbol:"<",html:"&lt;"},{symbol:">",html:"&gt;"},{symbol:'"',html:"&quot;"},{symbol:"'",html:"&#39;"},{symbol:"\\n\\r",html:"<br/>"},{symbol:"\\r\\n",html:"<br/>"},{symbol:"\\n",html:"<br/>"}],o=0,t=n.length;o<t;o++){var s=n[o],i=new RegExp(s.symbol,"g");e=e.replace(i,s.html)}return e},replaceUri:function(i,a){var e=new RegExp("((?:http|https|ftp)\\:\\/\\/)?(?:(?:(?:(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]{1}[0-9]{1}|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]{1}[0-9]{1}|[0-9]))|(?:(?!@)(?:[a-z0-9-]{1,36}\\.)+[a-z]{2,6}))(?:\\:[0-9]{1,5})?(?:[a-zA-Z0-9.,;?\\'+&%$#=~_\\-!()*\\/]*)","ig");return i.replace(e,function(e,n){var o=arguments[arguments.length-2],t="@"===i.substr(o-1,1),s=!c(e,n);return t||s?e:a.apply(null,arguments)})},replaceEmail:function(e,n){return e.replace(/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/gi,n)},browserRedirect:function(e){var n=navigator.userAgent.toLowerCase(),o="ipad"==n.match(/ipad/i),t="iphone os"==n.match(/iphone os/i),s="midp"==n.match(/midp/i),i="rv:1.2.3.4"==n.match(/rv:1.2.3.4/i),a="ucweb"==n.match(/ucweb/i),c="android"==n.match(/android/i),l="windows ce"==n.match(/windows ce/i),r="windows mobile"==n.match(/windows mobile/i);e(o||t||s||i||a||c||l||r?"phone":"pc")},cloneObj:function(e){var n,o=e.constructor===Array?[]:{};if("object"==typeof e){if(window.JSON)n=JSON.stringify(e),o=JSON.parse(n);else for(var t in e)o[t]="object"==typeof e[t]?cloneObj(e[t]):e[t];return o}}},t=function(e,n){null!=e.style.opacity?e.style.opacity=n/100:e.style.filter="alpha(opacity="+n+")"},l=[".com",".net",".org",".biz",".coop",".info",".museum",".name",".pro",".edu",".gov",".int",".mil",".ac",".ad",".ae",".af",".ag",".ai",".al",".am",".an",".ao",".aq",".ar",".as",".at",".au",".aw",".az",".ba",".bb",".bd",".be",".bf",".bg",".bh",".bi",".bj",".bm",".bn",".bo",".br",".bs",".bt",".bv",".bw",".by",".bz",".ca",".cc",".cd",".cf",".cg",".ch",".ci",".ck",".cl",".cm",".cn",".co",".cr",".cu",".cv",".cx",".cy",".cz",".de",".dj",".dk",".dm",".do",".dz",".ec",".ee",".eg",".eh",".er",".es",".et",".fi",".fj",".fk",".fm",".fo",".fr",".ga",".gd",".ge",".gf",".gg",".gh",".gi",".gl",".gm",".gn",".gp",".gq",".gr",".gs",".gt",".gu",".gv",".gy",".hk",".hm",".hn",".hr",".ht",".hu",".id",".ie",".il",".im",".in",".io",".iq",".ir",".is",".it",".je",".jm",".jo",".jp",".ke",".kg",".kh",".ki",".km",".kn",".kp",".kr",".kw",".ky",".kz",".la",".lb",".lc",".li",".lk",".lr",".ls",".lt",".lu",".lv",".ly",".ma",".mc",".md",".me",".mh",".mk",".ml",".mm",".mn",".mo",".mp",".mq",".mr",".ms",".mt",".mu",".mv",".mw",".mx",".my",".mz",".na",".nc",".ne",".nf",".ng",".ni",".nl",".no",".np",".nr",".nu",".nz",".om",".pa",".pe",".pf",".pg",".ph",".pk",".pl",".pm",".pn",".pr",".ps",".pt",".pw",".py",".qa",".re",".ro",".rw",".ru",".sa",".sb",".sc",".sd",".se",".sg",".sh",".si",".sj",".sk",".sl",".sm",".sn",".so",".sr",".st",".sv",".sy",".sz",".tc",".td",".tf",".tg",".th",".tj",".tk",".tm",".tn",".to",".tp",".tr",".tt",".tv",".tw",".tz",".ua",".ug",".uk",".um",".us",".uy",".uz",".va",".vc",".ve",".vg",".vi",".vn",".vu",".ws",".wf",".ye",".yt",".yu",".za",".zm",".zw",".mg"];var c=function(e,n){var o=e;n||(o="http://"+o);var t,s,i,a=(t=o,(s=document.createElement("a")).href=t,s);if(i=a.hostname,/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(i))return!0;var c=a.hostname.replace(/^.+\./,"");return!(l.indexOf("."+c)<0)};o.render=function(e,n){e=e||"",n=n||[""];for(var o,t=/{%((?:(?!%}).)+)%}/g,s=/(^( )?(var|if|for|else|switch|case|default|break|{|}))(.*)?/g,i="var r=[];\n",a=0,c=function(e,n){return i+=n?e.match(s)?e+"\n":"r.push("+e+");\n":""!=e?'r.push("'+e.replace(/"/g,'\\"')+'");\n':"",c};o=t.exec(e);)c(e.slice(a,o.index))(o[1],!0),a=o.index+o[0].length;c(e.substr(a,e.length-a)),i+='return r.join("");';for(var l="",r=0,d=(n=isNaN(n.length)?[n]:n).length;r<d;r++)l+=new Function(i.replace(/[\r\t\n]/g,"")).apply(n[r]);return l},e.utils=o}(RCS),function(e){function m(e,n){for(var o in e)n(o,e[o])}function n(e){var n,o,t,s,i,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=0,l=0,r="",d=[];if(!e)return e;for(e=function(e){if(null==e)return"";var n,o,t,s=e+"",i="";n=o=0,t=s.length;for(var a=0;a<t;a++){var c=s.charCodeAt(a),l=null;if(c<128)o++;else if(127<c&&c<2048)l=String.fromCharCode(c>>6|192,63&c|128);else if(63488&c^!0)l=String.fromCharCode(c>>12|224,c>>6&63|128,63&c|128);else{if(64512&c^!0)throw new RangeError("Unmatched trail surrogate at "+a);var r=s.charCodeAt(++a);if(64512&r^!0)throw new RangeError("Unmatched lead surrogate at "+(a-1));c=((1023&c)<<10)+(1023&r)+65536,l=String.fromCharCode(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}null!==l&&(n<o&&(i+=s.slice(n,o)),i+=l,n=o=a+1)}return n<o&&(i+=s.slice(n,t)),i}(e+"");n=(i=e.charCodeAt(c++)<<16|e.charCodeAt(c++)<<8|e.charCodeAt(c++))>>18&63,o=i>>12&63,t=i>>6&63,s=63&i,d[l++]=a.charAt(n)+a.charAt(o)+a.charAt(t)+a.charAt(s),c<e.length;);switch(r=d.join(""),e.length%3){case 1:r=r.slice(0,-2)+"==";break;case 2:r=r.slice(0,-1)+"="}return r}function v(e){return(e=n(e)).replace(/\//g,"_").replace(/\+/g,"-")}var f=0,p={};function h(l,r,d){var e=Math.ceil(f/r.chunk_size),n=Math.ceil(l.size/r.chunk_size),u=Math.min(r.chunk_size,l.size-f),o=l.slice(f,f+u),g={chunk:e,chunks:n,name:l.uniqueName};m(g,function(e,n){r.multi_parmas[e]=n}),r.filesize=l.size,r.headers={"Content-Type":"application/octet-stream"},r.isChunk=!0,M(o,r,{onCompleted:function(e){if(f+=u,p[l.uniqueName]=p[l.uniqueName]||[],p[l.uniqueName].push(e.ctx),f<l.size)e.ctx?h(l,r,d):(f=0,delete p[l.uniqueName]);else{f=0,delete r.isChunk,delete r.headers["Content-Type"],m(g,function(e,n){delete r.multi_parmas[e]});var n={ctx:p[l.uniqueName].join(","),name:l.name,size:l.size,filename:l.uniqueName};t=r,s=d,i="/key/"+v((o=n).filename),a="/fname/"+v(o.filename),c={domain:t.domain+"/mkfile/"+o.size+i+a,method:"POST",headers:{"Content-Type":"application/octet-stream"},multi_parmas:t.multi_parmas,support_options:!0,stream:!0},M(o.ctx,c,{onCompleted:function(e){e.filename=o.filename,e.name=o.name,s.onCompleted(e)},onError:function(){throw new Error("qiniu uploadChunk error")},onProgress:function(e,n){},onOpen:function(e){s.onOpen(e)}})}var o,t,s,i,a,c},onError:function(){throw new Error("qiniu uploadChunk error")},onProgress:function(e,n){var o=e+f;d.onProgress(o,r.filesize)},onOpen:function(e){d.onOpen(e)}})}function M(e,n,o){var t=new XMLHttpRequest;t.upload&&n.support_options&&(t.upload.onprogress=function(e){o.onProgress(e.loaded,e.total)}),t.onreadystatechange=function(){if(4==t.readyState){var e=t.responseText||"{}";(e=JSON.parse(e)).filename=n.unique_value,o.onCompleted(e)}};var s,i,a,c=n.domain;n.isChunk&&(c+="/mkblk/"+e.size,s=c,i=n.multi_parmas,a="",m(i,function(e,n){"token"!=e&&(a+=(a?"&":"")+encodeURIComponent(e)+"="+encodeURIComponent(n))}),a&&(s+=(0<s.indexOf("?")?"&":"?")+a),c=s),t.open(n.method,c,!0),o.onOpen(t),n.stream&&t.setRequestHeader("authorization","UpToken "+n.multi_parmas.token),m(n.headers,function(e,n){t.setRequestHeader(e,n)}),t.send(e)}var t=function(e,n,o){if(e.size&&n.chunk_size<e.size){var t=n.genUId(e);t+=e.name.substr(e.name.lastIndexOf(".")),e.uniqueName=t,n.stream=!0,h(e,n,o)}else M(n.data(e,n),n,o)},s={form:function(e,n){var o=new FormData;if(n.unique_key){var t=e.name.substr(e.name.lastIndexOf(".")),s=i()+t;o.append(n.unique_key,s),n.unique_value=s}return o.append(n.file_data_name,e),a(n.multi_parmas,function(e,n){o.append(e,n)}),o},json:function(e,n){var o={};if(n.unique_key){var t=e.name.substr(e.name.lastIndexOf(".")),s=i()+t;o[n.unique_key]=s,n.unique_value=s}return o[n.file_data_name]=e,a(n.multi_parmas,function(e,n){o[e]=n}),JSON.stringify(o)},data:function(e,n){return e}},o={domain:"http://upload.qiniu.com",fileType:RongIMLib.FileType.IMAGE,getToken:function(n){RongIMClient.getInstance().getFileToken(this.fileType,{onSuccess:function(e){n(e.token)},onError:function(e){console.log("获取上传token失败"),console.log(e)}})}};function i(){var o=(new Date).getTime();return"xxxxxx4xxxyxxxxxxx".replace(/[xy]/g,function(e){var n=(o+16*Math.random())%16|0;return o=Math.floor(o/16),("x"==e?n:3&n|8).toString(16)})}function a(e,n){for(var o in e)n(o,e[o])}function c(e){this.options=function(e){var n={domain:"",method:"POST",file_data_name:"file",unique_key:"key",base64_size:4194304,chunk_size:4194304,headers:{},multi_parmas:{},query:{},support_options:!0,data:s.form,genUId:i};if(!e||!e.domain)throw new Error("domain is null");for(var o in e)n[o]=e[o];return n}(e),this.setOptions=function(e){var o=this;a(e,function(e,n){o.options[e]=n})},this.upload=function(e,o){if(e){var n=this;t(e,this.options,{onProgress:function(e,n){o.onProgress(e,n)},onCompleted:function(e){o.onCompleted(e)},onError:function(e){o.onError(e)},onOpen:function(e){n.xhr=e}})}else o.onError("upload file is null.")},this.cancel=function(){this.xhr&&this.xhr.abort()}}function l(e){return new c(e)}var r=function(g,m,v){var e,n,f=document.createElement("canvas"),p=f.getContext("2d"),h=new Image;h.onload=function(){var e,n,o,t,s,i,a,c,l,r=(e=h.width,n=h.height,l=c=0,((a=e<n)?n/e:e/n)>(o=m).scale?a?l=((i=n/(t=e/(s=100)))-o.maxHeight)/2:c=((s=e/(t=n/(i=100)))-o.maxWidth)/2:a?(t=n/o.maxHeight,i=o.maxHeight,s=e/t):(t=e/o.maxWidth,s=o.maxWidth,i=n/t),{w:s,h:i,x:-c,y:-l});f.width=r.w>m.maxWidth?m.maxWidth:r.w,f.height=r.h>m.maxHeight?m.maxHeight:r.h,p.drawImage(h,r.x,r.y,r.w,r.h);try{var d=f.toDataURL(g.type,m.quality),u=new RegExp("^data:image/[^;]+;base64,");d=d.replace(u,""),v(d)}catch(e){throw new Error(e)}},h.src="string"==typeof g?"data:image/jpg;base64,"+g:(e=g,(n=window.URL||window.webkitURL)?n.createObjectURL(e):"")},d=function(e,n){var o=e.file,t=e.compress;r(o,t,n)};_init=function(o,t){if(o.getToken)o.getToken(function(e){o.multi_parmas||(o.multi_parmas={}),o.multi_parmas.token=e,o.headers||(o.headers={}),o.base64&&(o.headers["Content-type"]="application/octet-stream",o.headers.Authorization="UpToken "+e);var n=l(o);t(n)});else{o.headers||(o.headers={}),o.base64&&(o.headers["Content-type"]="application/octet-stream");var e=l(o);t(e)}};var u=function(o,e,t){e.upload(o.file,{onError:function(e){t.onError(e)},onProgress:function(e,n){t.onProgress(e,n)},onCompleted:function(n){n.filename||(n.filename=n.hash);var e=o.compressThumbnail||d;o.compress?e(o,function(e){n.thumbnail=e,t.onCompleted(n)}):t.onCompleted(n)}})},g=function(e){var o=this;this.instance=e,this.upload=function(e,n){u({file:e},o.instance,n)},this.cancel=function(){o.instance.cancel()}},b=function(e,n){var t=this;this.cfg=n,this.instance=e,this.upload=function(e,n){var o={file:e,compress:t.cfg};u(o,t.instance,n)},this.cancel=function(){t.instance.cancel()}},x=function(t,s){_init(t,function(e){var n={maxHeight:t.height||240,maxWidth:t.width||240,quality:t.quality||.5,scale:t.scale||2.4},o=new b(e,n);s(o)})},y=function(n,e,o){var t;t=function(e){e.upload(n,o)},_init(e,function(e){var n=new g(e);t(n)})},C=function(n,e,o){x(e,function(e){e.upload(n,o)})};e.imageStartUpload=function(e,n){C(e,o,{onError:function(e){console.log(e)},onProgress:function(e,n){},onCompleted:function(e){e.fileType="image",n(e)}})},e.fileStartUpload=function(e,n){o.fileType=RongIMLib.FileType.FILE,y(e,o,{onError:function(e){console.log(e)},onProgress:function(e,n){},onCompleted:function(e){e.fileType="file",n(e)}})},e.fileConfig=o}(RCS),function(c){c.getTemplates=function(e){var n={button:"templates/button.html",chat:"templates/chat.html",closebefore:"templates/closebefore.html",conversation:"templates/conversation.html",endconversation:"templates/endconversation.html",evaluate:"templates/evaluate.html",imageView:"templates/imageView.html",leaveword:"templates/leaveword.html",main:"templates/main.html",message:"templates/message.html",messageTemplate:"templates/messageTemplate.html",userInfo:"templates/userInfo.html",evaluateItem:"templates/evaluateItem.html"},o={};for(var t in n){var s=n[t],i=c.templateCache[s];if(i)o[t]=i;else{var a=new XMLHttpRequest;a.open("get",s,!1),a.onreadystatechange=function(){4==a.readyState&&200==a.status&&(o[t]=a.responseText)},a.send(null)}}return o}}(RCS),function(e){var n={init:function(){RongIMLib.RongIMEmoji.init()},emojiToHTML:function(e){return RongIMLib.RongIMEmoji.emojiToHTML(e,24)},symbolToEmoji:function(e){return RongIMLib.RongIMEmoji.symbolToEmoji(e)},getEmoji:function(){return RongIMLib.RongIMEmoji.list.map(function(e){return e.node})}};RCS.emoji=n}(),function(a){var d=a.utils,c=a.emoji,u=d.render,g={lastSendTime:0,lastInputTime:0,evaluateStatus:!0,closeStatus:1,messageContent:[],evaluateFormValue:{}};g.evaluateFormValue.isresolve=1;var l,r=null,m={},v={},f=d.$,s=!1,p=0,n=function(){var e=f(".rongcloud-text")[0],n=e.value;n&&(n=c.symbolToEmoji(n),h(new RongIMLib.TextMessage({content:n,extra:"附加信息"})),e.value="",e.focus())},o=function(){var e=(new Date).getTime()-g.lastSendTime;6e3<e&&(g.lastSendTime+=e,t())},t=function(){if(g.targetType==RongIMLib.ConversationType.CUSTOMER_SERVICE){var e=new RongIMLib.TypingStatusMessage({typingContentType:"RC:TxtMsg",data:null});h(e,function(){})}};var h=function(e,n){var o=g.id;RongIMClient.getInstance().sendMessage(g.targetType,o,e,{onSuccess:function(e){console.log(e),console.log("Send successfully"),n&&n(),n||M(e)},onError:function(e,n){var o="";switch(e){case RongIMLib.ErrorCode.TIMEOUT:o="超时";break;case RongIMLib.ErrorCode.UNKNOWN_ERROR:o="未知错误";break;case RongIMLib.ErrorCode.REJECTED_BY_BLACKLIST:o="在黑名单中，无法向对方发送消息";break;case RongIMLib.ErrorCode.NOT_IN_DISCUSSION:o="不在讨论组中";break;case RongIMLib.ErrorCode.NOT_IN_GROUP:o="不在群组中";break;case RongIMLib.ErrorCode.NOT_IN_CHATROOM:o="不在聊天室中";break;default:o=x}console.log("发送失败:"+o)}})},M=function(e){g.messageContent.push(e);var n=I(d.cloneObj(e));1!=e.messageDirection&&s&&i(n);var o=f(".rcs-message-box")[0];if(o){if(6e4<=n.sentTime-g.lastSendTime){var t={content:{},messageType:"TimeMessage"};t.sentTime=d.getTime(n.sentTime),o.innerHTML+=u(v.messageTemplate,t),g.lastSendTime=n.sentTime}o.innerHTML+=u(v.messageTemplate,n),o.scrollTop=o.scrollHeight}},i=function(e){if("pc"==l){var n={body:"您有一条新消息，请及时回复",icon:e.content.user&&e.content.user.icon?e.content.user.icon:a.config.csIcon},o=new Notification("客服消息提醒",n);o.onclick=function(e){window.focus(),o.close()},o.onshow=function(){setTimeout(function(){o.close()},5e3)}}},b=function(e){var n={showConversitionList:e.showConversitionList};n.showConversitionList&&(n.conversationList=u(v.conversation,e.customers)),f(".customer-service")[0].innerHTML=u(v.main,n);for(var o=f(".rong-conversation"),t=0;t<o.length;t++)o[t].onclick=function(){g.id!=this.getAttribute("_cid")&&(g.id=this.getAttribute("_cid"),w(g.id))}},y=function(e){g.targetType=RongIMLib.ConversationType.CUSTOMER_SERVICE;f(".rcs-chat-wrapper")[0];var n={},o={firstEnter:!0};n.messageList=u(v.message,o),n.evaEntryPoint=g.evaEntryPoint,n.terminal=l,n.announce=g.announce,f(".rcs-chat-wrapper")[0].innerHTML=u(v.chat,n);for(var t=c.getEmoji(),s="",i=0;i<t.length;i++)s+='<div class="emojiItem">'+t[i].outerHTML+"</div>";f(".rongcloud-expressionContent")[0].innerHTML+=s;C(e,0,2,function(e,n){(n||0!=e.length)&&(f(".rongcloud-Messages-history")[0].style.display="block")})},C=function(e,n,o,t){var s=RongIMLib.ConversationType.CUSTOMER_SERVICE,i=e;RongIMLib.RongIMClient.getInstance().getHistoryMessages(s,i,n,o,{onSuccess:function(e,n){console.log(e),g.messageContent=e.concat(g.messageContent),t(e,n)},onError:function(e){console.log("GetHistoryMessages,errorcode:"+e)}})},I=function(e){var n;return"TextMessage"==e.messageType?e.content.content=0===(n=e.content.content).length?"":(n=d.encodeHtmlStr(n),n=d.replaceUri(n,function(e,n){var o=e;return n||(o="http://"+e),'<a class="rong-link-site" target="_blank" href="'+o+'">'+e+"</a>"}),n=d.replaceEmail(n,function(e){return'<a class="rong-link-email" href="mailto:'+e+'">'+e+"<a>"}),c.emojiToHTML(n,18)):"FileMessage"==e.messageType?e.content.size=d.getFileSize(e.content.size):"InfoNtf"==e.messageType?e.messageType="InformationNotificationMessage":"VoiceMessage"==e.messageType?RongIMLib.RongIMVoice.preLoaded(e.content.content):"PullLeaveMessage"==e.messageType&&(e.messageType="AlertMessage",e.content.content=e.content.content.replace("留言",'<a class="leavemessageHref" onclick="RCS.leavemessage()">留言</a>')),e},k=function(e){for(var n=JSON.parse(JSON.stringify(e)),o=[],t=0;t<n.length;t++){var s={sentTime:d.getTime(n[t].sentTime),messageType:"TimeMessage"};0<=["TextMessage","FileMessage","InfoNtf","ImageMessage","InformationNotificationMessage","VoiceMessage","PullLeaveMessage"].indexOf(n[t].messageType)&&(n[t]=I(n[t]),0==t?o.push(s):6e3<=n[t].sentTime-n[t-1].sentTime&&o.push(s),o.push(n[t]))}return o},w=function(e){RongIMLib.RongIMClient.getInstance().startCustomService(e,{onSuccess:function(){console.log("客服初始化成功"),g.connect=!0},onError:function(){}},a.config.extraInfo)},R=function(e){console.log(g.id),RongIMLib.RongIMClient.getInstance().stopCustomeService(g.id,{onSuccess:function(){g.connect=!1,console.log("客服断开成功"),e&&e()},onError:function(e){console.log("errorcode")}})},S=function(e){"robot"==e?(g.serviceState="robot",d.hide(f(".rongcloud-mode1")[0]),d.show(f(".rongcloud-mode2")[0])):(g.serviceState="people",d.hide(f(".rongcloud-mode2")[0]),d.show(f(".rongcloud-mode1")[0]))},T={file:function(o){if(a.config.upload&&a.config.upload.isPrivate){1==o.rc_url.type?o.downloadUrl=o.rc_url.path:o.downloadUrl=a.config.upload.fileServer+o.rc_url.path;var e=E[o.fileType](o);h(e)}else{var n=RongIMLib.FileType.FILE;RongIMClient.getInstance().getFileUrl(n,o.filename,o.name,{onSuccess:function(e){o.downloadUrl=e.downloadUrl;var n=E[o.fileType](o);h(n)},onError:function(e){showResult("getFileToken error:"+e)}})}},image:function(o){if(a.config.upload&&a.config.upload.isPrivate){1==o.rc_url.type?o.downloadUrl=o.rc_url.path:o.downloadUrl=a.config.upload.fileServer+o.rc_url.path;var e=E[o.fileType](o);h(e)}else{var n=RongIMLib.FileType.IMAGE;RongIMClient.getInstance().getFileUrl(n,o.filename,null,{onSuccess:function(e){o.downloadUrl=e.downloadUrl;var n=E[o.fileType](o);h(n)},onError:function(e){console.log(e)}})}}},E={file:function(e){var n=e.name||"",o=n.lastIndexOf(".")+1,t=n.substring(o);return new RongIMLib.FileMessage({name:e.name,size:e.size,type:t,fileUrl:e.downloadUrl})},image:function(e){return new RongIMLib.ImageMessage({content:e.thumbnail,imageUri:e.downloadUrl})}},L=function(e){T[e.fileType](e)},N=function(e){e?"people"==g.serviceState?f(".rcs-chat-wrapper")[0].innerHTML+=d.render(v.evaluate,g.evaluate[0]):F(!1):1==g.closeStatus?f(".rcs-chat-wrapper")[0].innerHTML+=v.endconversation:2==g.closeStatus?(d.removeNode(".rongcloud-leavemessage"),g.closeStatus=1):3==g.closeStatus&&(R(),_(),g.closeStatus=1)},_=function(){f(".rcs-chat-wrapper")[0].innerHTML="",d.hide(f(".customer-service")[0]),g.lastSendTime=0,g.announce={},g.messageContent=[],g.evaluateFormValue={}},U=function(){d.removeNode(".rongcloud-layermbox")},F=function(e){var n=function(){U(),f(".rcs-chat-wrapper")[0].innerHTML+=v.closebefore};if(e){if(!H())return;1!=g.evaluate[0].isQuestionFlag&&(g.evaluateFormValue.isresolve=-1);for(var o=0,t=f(".satisfaction-star"),s=0;s<t.length;s++)-1!=t[s].className.indexOf("satisfaction-star-selected")&&(o+=1);g.evaluateFormValue.source=o,g.evaluateFormValue.type=1;var i=new RongIMClient.RegisterMessage.EvaluateMessage(g.evaluateFormValue);console.log(i),console.log(g.evaluateFormValue),RongIMClient.getInstance().sendMessage(g.targetType,g.id,i,{onSuccess:function(){console.log("发送评价消息成功"),n()},onError:function(){}})}else n()},H=function(){for(var e=f(".rongcloud-tag-item"),n=[],o=0;o<e.length;o++)-1!=e[o].className.indexOf("rongcloud-group-tag-active")&&n.push(e[o].innerText);return g.evaluateFormValue.tag=n.join(),g.evaluateFormValue.suggest=f(".rongcloud-evaluate-suggest")[0]?f(".rongcloud-evaluate-suggest")[0].value:"",g.evaluateFormValue.isTagMust&&!g.evaluateFormValue.tag?(D("请选择存在的问题"),!1):!(g.evaluateFormValue.isInputMust&&!g.evaluateFormValue.suggest)||(D("请输入评价内容"),!1)};function D(e){if(!f(".rongcloud-errorInfo")[0]){var n=document.createElement("div");n.className="rongcloud-errorInfo",n.innerText=e,f(".rcs-chat-wrapper")[0].appendChild(n),d.fadein(f(".rongcloud-errorInfo")[0]),setTimeout(function(){d.fadeout(f(".rongcloud-errorInfo")[0]),setTimeout(function(){f(".rcs-chat-wrapper")[0].removeChild(n)},500)},1e3)}}var O=function(){g.evaluateStatus=!1,f(".rcs-chat-wrapper")[0].innerHTML+=d.render(v.evaluate,g.evaluate[0])},z=function(e){g.closeStatus=e?3:2;var n={};n.list=g.formList,f(".rcs-chat-wrapper")[0].innerHTML+=u(v.leaveword,n)},V=function(e,n){var o=n.target||n.srcElement?n.target||n.srcElement:n,t=o.value,s="",i=g.formList;(i[e].required&&(t||(s=i[e].message[0])),t&&i[e].verification)&&(new RegExp({email:"^([0-9A-Za-z-_.]+)@([0-9a-z]+.[a-z]{2,3}(.[a-z]{2})?)$",phone:"^1\\d{10}$"}[i[e].verification]).test(t)||(s=i[e].message[1]));t&&i[e].max&&t.length>i[e].max&&(s=i[e].message[2]);var a=o.nextElementSibling;return s?(a.innerHTML=s,d.show(a),!1):(a.innerHTML="",d.hide(a),!0)},q=function(e){var n=e.target||e.srcElement?e.target||e.srcElement:e,o=n.value,t=n.getAttribute("name"),s=n.getAttribute("data-label"),i=n.getAttribute("data-required"),a=n.getAttribute("data-pattern"),c="";("required"==i&&(o||(c=s+"不能为空")),o&&a)&&(new RegExp({name:"^[一-龥A-Za-z0-9]+$",phone:"^1[3|4|5|7|8][0-9]{9}$",email:"^([0-9A-Za-z-_.]+)@([0-9a-z]+.[a-z]{2,3}(.[a-z]{2})?)$"}[t]).test(o)||(c=a));o&&"name"==t&&20<o.length&&(c=a),o&&"email"==t&&30<o.length&&(c=a);var l=n.nextElementSibling;return c?(l.innerHTML=c,d.show(l),!1):(l.innerHTML="",d.hide(l),!0)},j=function(l,r){if(0!=window.navigator.onLine){if(2==p)return g.connect||(l.connectingCallback&&l.connectingCallback(),r.getInstance&&r.getInstance(RongIMClient.getInstance()),g.id=l.customerServiceId),void A(l);if(1!=p){var o=0;p=1,l.connectingCallback&&l.connectingCallback();var e=l.appKey,n=l.token,t=l.navi||"";if(""!==t){var s={navi:t};console.log("私有云"),console.log(l),RongIMLib.RongIMClient.init(e,null,s)}else console.log("公有云"),console.log(l),RongIMLib.RongIMClient.init(e);a.config.upload&&a.config.upload.fileServer&&(a.fileConfig.domain=a.config.upload.fileServer);var i=RongIMClient.getInstance();RongIMClient.setConnectionStatusListener({onChanged:function(e){console.log(e);var n=f(".rcs-connect-status")[0];switch(n&&(n.style.display="block"),e){case RongIMLib.ConnectionStatus.CONNECTED:n&&(n.style.display="none"),p=2,o++,r.getInstance&&r.getInstance(i);break;case RongIMLib.ConnectionStatus.CONNECTING:console.log("正在链接");break;case RongIMLib.ConnectionStatus.DISCONNECTED:console.log("断开连接"),p=0,l.disconnectedCallback&&l.disconnectedCallback();break;case RongIMLib.ConnectionStatus.KICKED_OFFLINE_BY_OTHER_CLIENT:console.log("其他设备登录"),p=0,l.disconnectedCallback&&l.disconnectedCallback();break;case RongIMLib.ConnectionStatus.DOMAIN_INCORRECT:console.log("域名不正确"),p=0,l.disconnectedCallback&&l.disconnectedCallback();break;case RongIMLib.ConnectionStatus.NETWORK_UNAVAILABLE:console.log("网络不可用");break;case RongIMLib.ConnectionStatus.DISCONNECTED:console.log("断开连接"),p=0,l.disconnectedCallback&&l.disconnectedCallback();break;case 4:console.log("token无效"),p=0,l.disconnectedCallback&&l.disconnectedCallback();break;default:console.log("未知错误"),p=0,l.disconnectedCallback&&l.disconnectedCallback()}}}),RongIMClient.setOnReceiveMessageListener({onReceived:function(e){if(console.log("新消息: "+e.targetId),!e.offLineMessage){console.log(e);var n,o,t,s,i=null;switch(e.messageType){case"HandShakeResponseMessage":l.connectedCallback&&l.connectedCallback(),B(e),y(g.id),1==e.content.data.serviceType||3==e.content.data.serviceType?(e.content.data.robotWelcome&&(n=e.content.data,(o={}).sentTime=(new Date).getTime(),o.content={},o.messageType="TextMessage",o.content.content=n.robotWelcome,o.content.user={},o.content.user.icon=n.robotIcon,o.content.user.name=n.robotName,console.log(o),M(o)),S("robot")):S("people"),1==e.content.data.isblack&&(console.log(e.content.data.isblack),z(!0));break;case"ChangeModeResponseMessage":i=function(e){g.evaluate=e.content.data.satisfaction;var n=null;switch(e.content.data.status){case 1:S("people");break;case 2:S("robot");break;case 3:n="你被拉黑了";break;case 4:n="已经是人工了"}return n}(e);break;case"TerminateMessage":if(f(".imageViewBox")[0]&&d.fadeout(f(".imageViewBox")[0]),f(".rongcloud-layermbox")[0])return;if(!g.connect)return;0==e.content.code||3==g.evaEntryPoint?N(!0):S("robot");break;case"CustomerStatusUpdateMessage":S("people");break;case"InformationNotificationMessage":case"InfoNtf":M(e);break;case"SuspendMessage":R(),_();break;case"PullEvaMessage":O();break;case"CollectUserInfo":!function(e){d.removeNode(".userInfoModel");var n={};n.list=e.content.content.fields,m.formid=e.content.content.formid,m.submiturl=e.content.content.submiturl,m.data=[],m.wid=1;for(var o=0;o<n.list.length;o++){var t={};t.name=n.list[o].name,m.data.push(t)}f(".rcs-chat-wrapper")[0].innerHTML+=u(v.userInfo,n)}(e);break;case"HistoryMessage":var a=e.content.fileUrl,c=e.content.name;d.downloadHistoryMsgFile(a,c);break;case"TextMessage":case"ImageMessage":case"FileMessage":case"VoiceMessage":case"PullLeaveMessage":M(e);break;default:r.receiveNewMessage&&r.receiveNewMessage(e)}i&&(console.log(i),t=i,(s={}).sentTime=(new Date).getTime(),s.content={},s.messageType="InformationNotificationMessage",s.content.message=t,console.log(s),M(s))}}}),RongIMClient.connect(n,{onSuccess:function(e){r.getCurrentUser&&r.getCurrentUser({userId:e}),console.log("链接成功，用户id："+e),1==o&&r.enterConversation&&r.enterConversation(),o++},onTokenIncorrect:function(){console.log("token无效"),l.disconnectedCallback&&l.disconnectedCallback()},onError:function(e){console.log("============================================="),console.log(e),l.disconnectedCallback&&l.disconnectedCallback()}})}}else l.disconnectedCallback&&l.disconnectedCallback()},B=function(e){if(e.content.data.leaveMsgConf&&e.content.data.leaveMsgConf.defaultConf&&(g.formList=e.content.data.leaveMsgConf.defaultConf),g.announce={announceMsgFlag:e.content.data.announceMsgFlag,announceMsg:e.content.data.announceMsg,announceClickFlag:e.content.data.announceClickFlag,announceClickUrl:e.content.data.announceClickUrl},g.evaluateFormValue.uid=e.content.data.uid,g.evaluateFormValue.pid=e.content.data.pid,g.evaluateFormValue.sid=e.content.data.sid,1==e.content.data.needTypSts&&(g.needTypSts=1),e.content.data.evaConf)switch(e.content.data.evaConf.evaEntryPoint){case 1:g.evaEntryPoint=1;break;case 2:g.evaEntryPoint=2;break;case 3:g.evaEntryPoint=3}},A=function(e){var n={showButton:e.showButton};f(".customer-service")[0]||(e.target.innerHTML=u(v.button,n)),g.connect?J():(b(e),P(),e.showButton||J())},P=function(){d.browserRedirect(function(e){l=e}),"pc"==l?(document.body.onclick=function(){f(".rongcloud-text")[0];W()},"granted"===Notification.permission?s=!0:"denied"!==Notification.permission&&Notification.requestPermission(function(e){"granted"===e&&(s=!0)})):document.body.ontouchstart=function(e){if(e.target.className.indexOf("emojiItem")<0&&e.target.className.indexOf("rong-emoji-content")<0&&e.target.className.indexOf("rongcloud-expressionContent")<0&&W(),e.target.className.indexOf("rongcloud-rong-btn")<0&&e.target.className.indexOf("rongcloud-text")<0){var n=f(".rongcloud-text")[0];n&&n.blur()}},window.addEventListener("message",function(e){"https://web.jiaxincloud.com"==e.origin&&"success"==e.data&&d.removeNode(".rongcloud-leavemessage")},!1),window.onbeforeunload=function(e){R()}},W=function(){var e=f(".rongcloud-expressionWrap")[0];e&&d.hide(e)},J=function(){g.connect?"none"!=f(".customer-service")[0].style.display?d.hide(f(".customer-service")[0]):(d.show(f(".customer-service")[0]),f(".rcs-chat-wrapper")[0]||(b(g.id),y(g.id))):(console.log(g.id),w(g.id),d.show(f(".customer-service")[0]))};a.init=function(e){a.config=e,j(e,{getInstance:function(e){var n,o;n=function(){if(a.config.templates)for(var e in a.config.templates){if(!a.config.showButton&&"button"==e)break;v[e]=a.config.templates[e]}},v=a.getTemplates(),n&&n(),c.init(),RongIMLib.RongIMVoice.init(),o=new RongIMLib.MessageTag(!0,!0),RongIMLib.RongIMClient.registerMessageType("PullEvaMessage","RC:CsPullEva",o,["content"]),RongIMLib.RongIMClient.registerMessageType("EvaluateMessage","RC:CsEva",o,["sid","pid","uid","source","isresolve","tag","suggest","type"]),RongIMLib.RongIMClient.registerMessageType("PullLeaveMessage","RC:CsPLM",o,["content"]),RongIMLib.RongIMClient.registerMessageType("LeaveMessage","RC:CsLm",o,["msg_content","msg_email","msg_name","msg_tel"]),RongIMLib.RongIMClient.registerMessageType("CollectUserInfo","RC:CsCEI",o,["content","user"]),RongIMLib.RongIMClient.registerMessageType("UserInfo","RC:CsEI",o,["content"]),RongIMLib.RongIMClient.registerMessageType("DownloadHistoryMessage","RC:CsDHM",o,["begin"]),RongIMLib.RongIMClient.registerMessageType("HistoryMessage","RC:CsHM",o,["fileUrl","name","size","type"])},getCurrentUser:function(e){console.log(e.userId)},enterConversation:function(){g.id=e.customerServiceId,A(e)}})},a.send=n,a.keySend=function(e){"13"!=e.keyCode||e.shiftKey?1==g.needTypSts&&o():(e.preventDefault(),n())},a.showemoji=function(e){e.stopPropagation();var n=f(".rongcloud-expressionWrap")[0];"none"==n.style.display?d.show(n):d.hide(n)},a.chooseEmoji=function(e){e.stopPropagation();var n=f(".rongcloud-expressionWrap")[0],o=e.target||e.srcElement,t=f(".rongcloud-text")[0];"RC_Expression"==o.className&&(o=o.parentNode);var s=o.getAttribute("name");s&&(t.value+=s,d.hide(n),"pc"==l&&(t.focus(),range=document.createRange(),range.selectNodeContents(t),range.collapse(!0),range.setEnd(t,t.childNodes.length),range.setStart(t,t.childNodes.length),sel=window.getSelection(),sel.removeAllRanges(),sel.addRange(range)))},a.loadHisMessages=function(){C(g.id,null,20,function(e,n){var o=f(".rcs-message-box")[0],t={};t.hasMore=n,t.list=k(g.messageContent);var s=o.scrollHeight;o.innerHTML=u(v.message,t);var i=o.scrollHeight;o.scrollTop=i-s})},a.scrollBottom=function(){var e=f(".rcs-message-box")[0];e.scrollTop=e.scrollHeight},a.imgUpload=function(e){for(var n=e.target||e.srcElement,o=n.files,t=0;t<o.length;t++)a.imageStartUpload(o[t],function(e){console.log("文件上传完成：",e),L(e)});n.value=""},a.fileUpload=function(e){for(var n=e.target||e.srcElement,o=n.files,t=0;t<o.length;t++)a.fileStartUpload(o[t],function(e){console.log("文件上传完成：",e),L(e)});n.value=""},a.switchPerson=function(){console.log(g.id),RongIMLib.RongIMClient.getInstance().switchToHumanMode(g.id,{onSuccess:function(){console.log("转人工成功")},onError:function(){}})},a.endConversation=N,a.play=function(e,n){RongIMLib.RongIMVoice.stop();var o=e.target||e.srcElement;if(-1!=o.className.indexOf("rongcloud-animate"))o.className=o.className.replace(" rongcloud-animate",""),clearTimeout(r);else{var t=o.parentNode.querySelector(".rongcloud-audioState");if(t&&t.parentNode.removeChild(t),r){clearTimeout(r);for(var s=f(".rongcloud-audioBox"),i=0;i<s.length;i++)s[i].className="rongcloud-audioBox rongcloud-clearfix"}RongIMLib.RongIMVoice.play(n.content,n.duration),o.className=o.className+" rongcloud-animate",r=setTimeout(function(){o.className=o.className.replace(" rongcloud-animate","")},1e3*n.duration)}},a.playVideo=function(e){var n=e.currentTarget.querySelector("video"),o=e.currentTarget.querySelector(".play-btn");n.paused?(n.play(),o.style.display="none"):(n.pause(),o.style.display="block"),n.onended=function(){o.style.display="block"}},a.minimize=function(){d.hide(f(".customer-service")[0])},a.showCommon=J,a.confirm=function(){U(),"people"==g.serviceState?f(".rcs-chat-wrapper")[0].innerHTML+=d.render(v.evaluate,g.evaluate[0]):F(!1)},a.close=U,a.evaluate=F,a.star=function(e){for(var n=f(".satisfaction-star"),o=0;o<n.length;o++)n[o].className="satisfaction-star",o<e&&(n[o].className="satisfaction-star satisfaction-star-selected");var t=g.evaluate[e-1];t.labelNameArray=5==e?[]:(g.evaluateFormValue.isTagMust=t.isTagMust,g.evaluateFormValue.isInputMust=t.isInputMust,t.labelName.split(",")),f(".rongcloud-evaluate-tag")[0].innerHTML=d.render(v.evaluateItem,t)},a.startEvaluate=function(e){e.target||e.srcElement;O()},a.leavemessage=z,a.leaveMessageComfirm=function(e){e.preventDefault();for(var n=[],o=0;o<g.formList.length;o++)n.push(g.formList[o].name);var t=!0;for(o=0;o<n.length;o++){var s=document.getElementsByName(n[o])[0];V(o,s)||(t=!1)}if(t){var i=d.getFormValue(n),a=new RongIMClient.RegisterMessage.LeaveMessage(i);h(a,function(){R(),_()})}},a.validateUserInfo=q,a.validateLeaveMessage=V,a.viewImage=function(e){var n={imageUrl:(e.target||e.srcElement).getAttribute("data-img")};f(".imageViewBox")[0].innerHTML=u(v.imageView,n),d.fadein(f(".imageViewBox")[0])},a.escImageView=function(){f(".imageViewBox")[0].innerHTML="",d.fadeout(f(".imageViewBox")[0])},a.userInfoClose=function(){d.removeNode(".userInfoModel"),m={}},a.userInfoConfirm=function(e){e.preventDefault();for(var n=[],o=0;o<m.data.length;o++)n.push(m.data[o].name);var t=!0;for(o=0;o<n.length;o++){var s=document.getElementsByName(n[o])[0];q(s)||(t=!1)}if(t){var i=d.getFormValue(n);for(o=0;o<m.data.length;o++)m.data[o].value=i[m.data[o].name];var a={};a.content=m;var c=new RongIMClient.RegisterMessage.UserInfo(a);m={},h(c,function(){d.removeNode(".userInfoModel")})}},a.getHistoryMsgFile=function(){var e=new RongIMClient.RegisterMessage.DownloadHistoryMessage({begin:0});h(e,function(){})},a.keyboard=function(e){var n=e.target||e.srcElement;setTimeout(function(){n.scrollIntoView(!0)},500)},a.chatEnd=function(){R(),_()},a.openNotice=function(e){window.open(e)},a.isresolve=function(e,n){g.evaluateFormValue.isresolve=n;for(var o=e.target||e.srcElement,t=f(".rongcloud-solve-tag"),s=0;s<t.length;s++)t[s].className="rongcloud-group-tag rongcloud-solve-tag";o.className="rongcloud-group-tag rongcloud-solve-tag rongcloud-solve-active"},a.tagClick=function(e){var n=e.target||e.srcElement;-1!=n.className.indexOf("rongcloud-group-tag-active")?n.className="rongcloud-group-tag rongcloud-tag-item":n.className="rongcloud-group-tag rongcloud-tag-item rongcloud-group-tag-active"}}(RCS),RCS.templateCache={"templates/button.html":'\x3c!-- class="customer-service"主页面容器，类名不能修改 --\x3e\n<div class="rongcloud-consult">\n    <button onclick="RCS.showCommon()"><span>咨询客服</span></button>\n</div>\n<div class="customer-service" style="display: none;"></div>',"templates/chat.html":'\x3c!-- \nclass="rongcloud-text"消息输入框; \nclass="rongcloud-expressionContent"表情容器;\nclass="rcs-message-box"消息列表容器;\nclass="rongcloud-Messages-history"查看更多消息按钮;\nclass="rongcloud-mode1"、class="rongcloud-mode2"人工、机器人转换按钮的容器(机器人状态时，rongcloud-mode1隐藏，rongcloud-mode1显示);\nclass="rcs-connect-status"connect断开时，状态显示的容器\nclass="imageViewBox"图片预览容器\n以上类名不能被修改\n --\x3e\n<div class="rongcloud-kefuChat">\n    <div id="header" class="rongcloud-rong-header rongcloud-blueBg rongcloud-online">\n        {%if(this.terminal == \'phone\'){%}\n        <span class="rongcloud-phone-exit" onclick="RCS.endConversation()"></span>\n        <div class="rongcloud-phone-infoBar">\n            <span class="rongcloud-phone-kefuName">客服</span>\n        </div>\n        {%}else{%}<div class="rongcloud-infoBar rongcloud-pull-left">\n            <div class="rongcloud-infoBarTit">\n                <span class="rongcloud-kefuName">客服</span>\n            </div>\n        </div>\n        <div class="rongcloud-toolBar rongcloud-headBtn rongcloud-pull-right">\n            <div class="rongcloud-voice"></div>\n            <a onclick="RCS.minimize()" class="rongcloud-kefuChatBoxHide rongcloud-sprite" title="隐藏"></a>\n            <a onclick="RCS.endConversation()" class="rongcloud-kefuChatBoxClose rongcloud-sprite" title="结束对话"></a>\n        </div>{%}%}\n    </div>\n    <div class="rongcloud-box">\n        <div class="rongcloud-outlineBox rcs-connect-status" style="display:none;">\n            <div class="rongcloud-sprite"></div>\n            <span>连接断开,请刷新重连</span>\n        </div>\n        {%if(this.announce.announceMsgFlag == 1){%}\n        <div class="rongcloud-noticeBox {%if(this.announce.announceClickFlag == 1){%} rongcloud-link {%}%}" {%if(this.announce.announceClickFlag == 1){%} onclick=\'RCS.openNotice({%JSON.stringify(this.announce.announceClickUrl)%})\' {%}%}>\n            <div class="rongcloud-notice-horn"></div>\n            <span class="rongcloud-noticeBox-content">{%this.announce.announceMsg%}</span>\n            {%if(this.announce.announceClickFlag == 1){%}<div class="rongcloud-notice-link"></div>{%}%}\n        </div>\n        {%}%}\n    </div>\n    \n    <div id="rcs-message-list" class="rcs-message-box {%if(this.announce.announceMsgFlag == 1){%} rongcloud-hasNotice {%}%}">\n        {%this.messageList%}\n    </div>\n\n    <div id="rcs-chat-box" class="rongcloud-rong-footer">\n        <div class="rongcloud-footer-con">\n            <div class="rongcloud-text-layout">\n                <div id="funcPanel" class="rongcloud-funcPanel rongcloud-robotMode">\n                    <div class="rongcloud-MessageForm-tool" id="expressionWrap" style="overflow: visible;">\n                        <i class="rongcloud-sprite rongcloud-iconfont-smile" onclick="RCS.showemoji(event)"></i>\n                        <div class="rongcloud-expressionWrap" onclick="RCS.chooseEmoji(event)" style="display: none;">\n                            <div class="rongcloud-expressionContent"></div>\n                        </div>\n                    </div>\n                    <div class="rongcloud-mode1" style="display: none;">\n                        <div class="rongcloud-MessageForm-tool">\n                          <i class="rongcloud-sprite rongcloud-iconfont-upload" id="upload-image">\n                            <input type="file" multiple="multiple" accept="image/png,image/gif,image/jpeg" onchange="RCS.imgUpload(event)"></input>\n                          </i>\n                        </div>\n                        \x3c!-- <div class="rongcloud-MessageForm-tool">\n                          <i class="rongcloud-sprite rongcloud-iconfont-file" id="upload-file">\n                            <input type="file" multiple="multiple" onchange="RCS.fileUpload(event)"></input>\n                          </i>\n                        </div> --\x3e\n                        \x3c!-- <div class="rongcloud-MessageForm-tool">\n                          <i class="rongcloud-sprite rongcloud-iconfont-download" id="download-his" onclick="RCS.getHistoryMsgFile()">\n                          </i>\n                        </div> --\x3e\n                        {%if(this.evaEntryPoint == 1){%}\n                        <div class="rongcloud-MessageForm-tool">\n                          <i class="rongcloud-sprite rongcloud-iconfont-evaluate" onclick="RCS.startEvaluate(event)">\n                          </i>\n                        </div>{%}%}\n                    </div>\n                    <div class="rongcloud-mode2"><a onclick="RCS.switchPerson()" id="chatSwitch" class="rongcloud-chatSwitch">转人工服务</a></div>\n                </div>\n            </div>\n        </div>\n        <div class="rongcloud-footer-input">\n            <div class="rongcloud-footer-textarea"">\n                <textarea class="rongcloud-text rongcloud-grey" placeholder="请输入文字..." onfocus="RCS.keyboard(event)" onkeydown="RCS.keySend(event)"></textarea>\n            </div>\n            <button type="button" style="background-color: #0099ff;" class="rongcloud-rong-btn rongcloud-rong-send-btn" id="rong-sendBtn" onclick="RCS.send(event)">发送</button>\n        </div>\n    </div>\n</div>\n<div class="rebox imageViewBox" onclick="RCS.escImageView()" style="display: none;">\n    \n</div>',"templates/closebefore.html":'\x3c!-- 客服主动关闭弹出的页面 --\x3e\n<div class="rongcloud-layermbox">\n    <div class="rongcloud-laymshade"></div>\n    <div class="rongcloud-layermmain">\n        <div class="rongcloud-section">\n            <div class="rongcloud-layermchild rongcloud-endconversation">\n                <p class="rongcloud-prompt">客服会话已结束</p>\n                <div class="rongcloud-buttons" onclick="RCS.chatEnd()"><button class="rongcloud-button">确定</button></div>\n            </div>\n        </div>\n    </div>\n</div>',"templates/conversation.html":'\x3c!-- 会话列表每一个会话\nclass="rong-conversation"会话列表中的每一个会话\n此类名不能被修改\n--\x3e\n<div class="rong-conversation" _cid="{%this.cid%}" _name="{%this.name%}">\n    <img src="https://bsetting60.ntalker.com/application/static/setting/images/head.jpg" alt="">\n    <span class="rong-conversation-name">客服{%this.cid%} - {%this.name%}</span>\n    <div class="rong-conversation-message">...</div>\n</div>',"templates/endconversation.html":'\x3c!-- endconversation: 用户主动关闭弹出的页面  \nclass="rongcloud-layermbox"弹出层容器\n此类名不能被修改\n--\x3e\n<div class="rongcloud-layermbox">\n    <div class="rongcloud-laymshade"></div>\n    <div class="rongcloud-layermmain">\n        <div class="rongcloud-section">\n            <div class="rongcloud-layermchild rongcloud-endconversation">\n                <p class="rongcloud-prompt">是否要结束当前会话?</p>\n                <div class="rongcloud-buttons"><button class="rongcloud-button" onclick="RCS.confirm()">是</button><button class="rongcloud-button" onclick="RCS.close()">否</button></div>\n            </div>\n        </div>\n    </div>\n</div>',"templates/evaluate.html":'\x3c!-- evaluate: 评价页面  \nclass="rongcloud-evaluate"评价弹出层容器;\nclass="rongcloud-evaluate-tag"评价tag容器;\n此类名不能被修改\n--\x3e\n<div class="rongcloud-layermbox rongcloud-evaluate">\n    <div class="rongcloud-laymshade"></div>\n    <div class="rongcloud-layermmain">\n        <div class="rongcloud-section">\n            <div class="rongcloud-layermchild rongcloud-evaluate">\n                <div class="rongcloud-layer-title">评价客服</div>\n                <div class="rongcloud-layer-body">\n                    {%if(this.isQuestionFlag == 1){%}\n                    <div class="rongcloud-group-row">\n                        <div class="rongcloud-group-title">请问客服是否解决了您的问题</div>\n                        <div class="rongcloud-group-tag-list">\n                            <div class="rongcloud-group-tag rongcloud-solve-tag rongcloud-solve-active" onclick="RCS.isresolve(event,1)">已解决</div>\n                            <div class="rongcloud-group-tag rongcloud-solve-tag" onclick="RCS.isresolve(event,0)">未解决</div>\n                        </div>\n                    </div>{%}%}\n                    <div class="rongcloud-group-row">\n                        <div class="rongcloud-group-title">请您对客服进行评价</div>\n                        <span class="satisfaction-star satisfaction-star-selected" onclick="RCS.star(1)"></span>\n                        <span class="satisfaction-star satisfaction-star-selected" onclick="RCS.star(2)"></span>\n                        <span class="satisfaction-star satisfaction-star-selected" onclick="RCS.star(3)"></span>\n                        <span class="satisfaction-star satisfaction-star-selected" onclick="RCS.star(4)"></span>\n                        <span class="satisfaction-star satisfaction-star-selected" onclick="RCS.star(5)"></span>\n                    </div>\n                    <div class="rongcloud-evaluate-tag">\n                        \n                    </div>\n                </div>\n                <div class="rongcloud-foot">\n                    <button class="rongcloud-evaluate-btn" onclick="RCS.evaluate(true)">提交</button><button class="rongcloud-evaluate-btn" onclick="RCS.evaluate(false)">取消</button>\n                </div>\n            </div>\n            \x3c!--反馈提示--\x3e\n            \x3c!-- <div class="rongcloud-layermchild rongcloud-feedback" ng-show="end">\n                <div class="rongcloud-layermcont">\n                    感谢您的反馈 ^ - ^ ！\n                </div>\n            </div> --\x3e\n        </div>\n    </div>\n</div>\n',"templates/evaluateItem.html":'{%if(this.labelNameArray.length != 0){%}\n<div class="rongcloud-group-row">\n    <div class="rongcloud-group-title">存在哪些问题{%if(this.isTagMust == 1){%}(必填){%}%}</div>\n    <div class="rongcloud-group-tag-list">\n    \t{%for(var index in this.labelNameArray){%}\n        <div class="rongcloud-group-tag rongcloud-tag-item" onclick="RCS.tagClick(event)">{%this.labelNameArray[index]%}</div>\n        {%}%}\n    </div>\n</div>\n<div class="rongcloud-group-row">\n    <textarea class="rongcloud-evaluate-suggest rongcloud-suggest" placeholder="其他想说的"></textarea>\n</div>\n{%}%}',"templates/imageView.html":'\x3c!-- imageView: 图片预览页面   --\x3e\n<a href="#" class="rebox-close rebox-button">×</a>\n<div class="rebox-contents">\n\t<img src="{%this.imageUrl%}" class="rebox-content">\n</div>\n',"templates/import.html":'<script id="rcs-templte-button" type="rcs/templte">\n\t\x3c!--#include file="button.html"--\x3e\n<\/script>\n\n<script id="rcs-templte-main" type="rcs/templte">\n\t\x3c!--#include file="main.html"--\x3e\n<\/script>\n\n<script id="rcs-templte-conversation" type="rcs/templte">\n\t\x3c!--#include file="conversation.html"--\x3e\n<\/script>\n\n<script id="rcs-templte-chat" type="rcs/templte">\n\t\x3c!--#include file="chat.html"--\x3e\n<\/script>\n\n<script id="rcs-templte-message" type="rcs/templte">\n\t\x3c!--#include file="message.html"--\x3e\n<\/script>\n\n<script id="rcs-templte-message-template" type="rcs/templte">\n\t\x3c!--#include file="messageTemplate.html"--\x3e\n<\/script>\n\n\n<script id="rcs-templte-closebefore" type="rcs/templte">\n\t\x3c!--#include file="closebefore.html"--\x3e\n<\/script>\n\n<script id="rcs-templte-endconversation" type="rcs/templte">\n\t\x3c!--#include file="endconversation.html"--\x3e\n<\/script>\n\n<script id="rcs-templte-evaluate" type="rcs/templte">\n\t\x3c!--#include file="evaluate.html"--\x3e\n<\/script>\n\n<script id="rcs-templte-leaveword" type="rcs/templte">\n\t\x3c!--#include file="leaveword.html"--\x3e\n<\/script>\n\n<script id="rcs-templte-imageView" type="rcs/templte">\n\t\x3c!--#include file="imageView.html"--\x3e\n<\/script>\n\n<script id="rcs-templte-userInfo" type="rcs/templte">\n\t\x3c!--#include file="userInfo.html"--\x3e\n<\/script>',"templates/leaveword.html":'\x3c!-- leaveword: 留言页面  \nclass="rongcloud-leavemessage"留言弹出层容器\n此类名不能被修改--\x3e\n<div class="rongcloud-leavemessage">\n    {%if(this.url){%}\n    <iframe id="leavewordIframe" src="{%this.url%}" frameborder="0" width="100%;" height="100%;"></iframe>\n    {%}else{%}\n    <div class="rongcloud-leavemessage-title">您好，请留言~</div>\n    <form>\n        {%for(var index in this.list){%}\n        <div class="rongcloud-form-item">\n            <label class="{%if(this.list[index].required){%}{%\'rongcloud-require\'%}{%}%}">{%this.list[index].title%}：</label>\n            {%if(this.list[index].type == \'text\'){%}<input class="rongcloud-inputtext" name="{%this.list[index].name%}" placeholder="{%this.list[index].defaultText%}" type="text" onblur="RCS.validateLeaveMessage({%index%}, event)"></input>{%}else{%}\n            <textarea name="{%this.list[index].name%}" placeholder="{%this.list[index].defaultText%}" onblur="RCS.validateLeaveMessage({%index%}, event)"></textarea>{%}%}\n            <div class="rongcloud-form-error" style="display: none;"></div>\n        </div>{%}%}\n        <div class="rongcloud-leavemessage-form-btns">\n            <button class="rongcloud-btn" onclick="RCS.leaveMessageComfirm(event)">提交</button>\n        </div>\n    </form>{%}%}\n</div>',"templates/main.html":'\x3c!-- main: 包括客服列表和聊天窗口的主页面  \nclass="rcs-chat-wrapper"聊天窗口的容器 \n此类名不能被修改\n--\x3e\n<div id="rcs-main" class="rongcloud-kefuListBox rongcloud-container">\n    {%if(this.showConversitionList){%}<div class="rongcloud-kefuList">\n        <div class="rongcloud-rong-header rongcloud-blueBg">\n            <div class="rongcloud-toolBar rongcloud-headBtn">\n                <div class="rongcloud-voice"></div>\n                <div class="rongcloud-sprite rongcloud-people"></div>\n                <span class="rongcloud-recent">客服列表</span>\n                <div class="rongcloud-sprite rongcloud-arrow-down cursor-pointer" onclick="RCS.minimize()"></div>\n            </div>\n        </div>\n        <div class="rongcloud-content">\n            <div class="rongcloud-netStatus" style="display:none">\n                <div class="rongcloud-sprite"></div>\n                <span>连接断开,请刷新重连</span>\n            </div>\n            <div class="rcs-conversation-list">\n                {%this.conversationList%}\n                \x3c!-- <div class="rcs-conversation-item"></div> --\x3e\n            </div>\n        </div>\n    </div>{%}%}\n    <div class="rcs-chat-wrapper"></div>\n</div>',"templates/message.html":'\x3c!-- message: 消息list的页面 --\x3e\n<div class="rong-message-list">\n    {%if(this.firstEnter){%}<div class="rongcloud-Messages-history" style="display: none;"><b onclick="RCS.loadHisMessages()">查看历史消息</b></div>{%}else if(this.hasMore){%}<div class="rongcloud-Messages-history"><b onclick="RCS.loadHisMessages()">查看历史消息</b></div>{%}%}{%else{%}<div class="rongcloud-Messages-history"><b>没有更多消息</b></div>{%}%}\n    {%for(var index in this.list){%}{%switch(this.list[index].messageType){%}{%case \'TextMessage\':%}\n    <div class="rongcloud-Message rongcloud-clearfix {%if(this.list[index].messageDirection == 1){%} {%\'rongcloud-Message-send\'%} {%}%}" id="rcs-templte-message-text">\n        <div>\n            <div class="rongcloud-Message-header"><img class="rongcloud-img rongcloud-Message-avatar rongcloud-avatar" src="{%if(this.list[index].messageDirection != 1){%} {%if(this.list[index].content.user.icon){%}{%this.list[index].content.user.icon%}{%}else{%} {%RCS.config.csIcon%} {%}%} {%}else{%} {%RCS.config.userIcon%} {%}%}" alt="">\n                <div class="rongcloud-Message-author rongcloud-clearfix">\n                  <a class="rongcloud-author">{%if(this.list[index].messageDirection != 1){%}{%this.list[index].content.user.name%}{%}else{%} {%\'我\'%} {%}%}</a>\n                </div>\n            </div>\n        </div>\n        <div class="rongcloud-Message-body">\n            <div class="rongcloud-Message-text">\n                <pre class="rongcloud-Message-entry">{%this.list[index].content.content%}</pre>\n            </div>\n        </div>\n    </div>{%break;%}\n    {%case \'ImageMessage\':%}\n    <div class="rongcloud-Message rongcloud-clearfix {%if(this.list[index].messageDirection == 1){%} {%\'rongcloud-Message-send\'%} {%}%}" id="rcs-templte-message-text">\n        <div>\n            <div class="rongcloud-Message-header"><img class="rongcloud-img rongcloud-Message-avatar rongcloud-avatar" src="{%if(this.list[index].messageDirection != 1){%} {%if(this.list[index].content.user.icon){%}{%this.list[index].content.user.icon%}{%}else{%} {%RCS.config.csIcon%} {%}%} {%}else{%} {%RCS.config.userIcon%} {%}%}" alt="">\n                <div class="rongcloud-Message-author rongcloud-clearfix">\n                  <a class="rongcloud-author">{%if(this.list[index].messageDirection != 1){%}{%this.list[index].content.user.name%}{%}else{%} {%\'我\'%} {%}%}</a>\n                </div>\n            </div>\n        </div>\n        <div class="rongcloud-Message-body">\n            <div class="rongcloud-Message-img">\n                <span class="rongcloud-Message-entry">\n                    <a onclick="RCS.viewImage(event)" class="cursor-pointer" data-img="{%this.list[index].content.imageUri%}">\n                        <img src="{%this.list[index].content.imageUri%}" data-img="{%this.list[index].content.imageUri%}">\n                    </a>\n                </span>\n            </div>\n        </div>\n    </div>{%break;%}\n    {%case \'FileMessage\':%}\n    <div class="rongcloud-Message rongcloud-clearfix {%if(this.list[index].messageDirection == 1){%} {%\'rongcloud-Message-send\'%} {%}%}" id="rcs-templte-message-text">\n        <div>\n            <div class="rongcloud-Message-header"><img class="rongcloud-img rongcloud-Message-avatar rongcloud-avatar" src="{%if(this.list[index].messageDirection != 1){%} {%if(this.list[index].content.user.icon){%}{%this.list[index].content.user.icon%}{%}else{%} {%RCS.config.csIcon%} {%}%} {%}else{%} {%RCS.config.userIcon%} {%}%}" alt="">\n                <div class="rongcloud-Message-author rongcloud-clearfix">\n                  <a class="rongcloud-author">{%if(this.list[index].messageDirection != 1){%} {%if(this.list[index].content.user){%}{%this.list[index].content.user.name%}{%}else{%} {%\'客服\'%} {%}%}  {%}else{%} {%\'我\'%} {%}%}</a>\n                </div>\n            </div>\n        </div>\n        <div class="rongcloud-Message-body">\n            <div class="rongcloud-Message-file">\n                <div class="rongcloud-sprite rongcloud-file-icon"></div>\n                <div class="rongcloud-file-name">{%this.list[index].content.name%}</div>\n                <div class="rongcloud-file-size">{%this.list[index].content.size%}</div>\n                <a class="rongcloud-sprite rongcloud-file-download" href="{%this.list[index].content.fileUrl%}" download="{%this.list[index].content.name%}"></a>\n            </div>\n        </div>\n    </div>{%break;%}\n    {%case \'VoiceMessage\':%}\n    <div class="rongcloud-Message rongcloud-clearfix {%if(this.list[index].messageDirection == 1){%} {%\'rongcloud-Message-send\'%} {%}%}" id="rcs-templte-message-text">\n        <div>\n            <div class="rongcloud-Message-header"><img class="rongcloud-img rongcloud-Message-avatar rongcloud-avatar" src="{%if(this.list[index].messageDirection != 1){%} {%if(this.list[index].content.user.icon){%}{%this.list[index].content.user.icon%}{%}else{%} {%RCS.config.csIcon%} {%}%} {%}else{%} {%RCS.config.userIcon%} {%}%}" alt="">\n                <div class="rongcloud-Message-author rongcloud-clearfix">\n                  <a class="rongcloud-author">{%if(this.list[index].messageDirection != 1){%}{%this.list[index].content.user.name%}{%}else{%} {%\'我\'%} {%}%}</a>\n                </div>\n            </div>\n        </div>\n        <div class="rongcloud-Message-body">\n            <div class="rongcloud-Message-audio">\n                <span class="rongcloud-Message-entry">\n                    {%if(this.messageDirection == 1){%}\n                        <div style="display:inline-block;">\n                            <span class="rongcloud-audioTimer">{%Math.ceil(this.list[index].content.duration || this.list[index].content.duration / 1024)%}\'\'</span>\n                        </div>\n                        <span class="rongcloud-r-audioBox rongcloud-clearfix" onclick=\'RCS.play(event, {%JSON.stringify(this.list[index].content)%})\'>\n                            <i></i><i></i><i></i>\n                        </span>\n                    {%}else{%}\n                        <span class="rongcloud-audioBox rongcloud-clearfix" onclick=\'RCS.play(event, {%JSON.stringify(this.list[index].content)%})\'>\n                            <i></i><i></i><i></i>\n                        </span>\n                        <div style="display:inline-block;">\n                            <span class="rongcloud-audioTimer">{%Math.ceil(this.list[index].content.duration || this.list[index].content.duration / 1024)%}\'\'</span>\n                        </div>\n                    {%}%}\n                </span>\n            </div>\n        </div>\n    </div>{%break;%}\n    {%case \'TimeMessage\':%}\n    <div class="rongcloud-Messages-date">\n        <b>{%this.list[index].sentTime%}</b>\n    </div>{%break;%}\n    {%case \'InformationNotificationMessage\':%}\n    <div class="rongcloud-sys-tips">\n        <span>{%this.list[index].content.message%}</span>\n    </div>{%break;%}\n    {%case \'AlertMessage\':%}\n    <div class="rongcloud-sys-tips">\n        <span>{%this.list[index].content.content%}</span>\n    </div>{%break;%}\n    {%case \'SightMessage\': %}\n    <div class="rongcloud-Message rongcloud-clearfix {%if(this.list[index].messageDirection == 1){%} {%\'rongcloud-Message-send\'%} {%}%}" id="rcs-templte-message-text">\n        <div>\n            <div class="rongcloud-Message-header"><img class="rongcloud-img rongcloud-Message-avatar rongcloud-avatar" src="{%if(this.list[index].messageDirection != 1){%} {%if(this.list[index].content.user.icon){%}{%this.list[index].content.user.icon%}{%}else{%} {%RCS.config.csIcon%} {%}%} {%}else{%} {%RCS.config.userIcon%} {%}%}" alt="">\n                <div class="rongcloud-Message-author rongcloud-clearfix">\n                  <a class="rongcloud-author">{%if(this.list[index].messageDirection != 1){%}{%this.list[index].content.user.name%}{%}else{%} {%\'我\'%} {%}%}</a>\n                </div>\n            </div>\n        </div>\n        <div class="rongcloud-Message-body">\n            <div class="rongcloud-Message-sight" onclick="RCS.playVideo(event)">\n                <video poster="{% \'data:image/jpg;base64,\' + this.list[index].content.content %}" src="{% this.list[index].content.sightUrl %}"></video>\n                <div class="play-btn"></div>\n            </div>\n        </div>\n    </div>\n    {%break;%}\n    {%default: %}\n    <div class="rongcloud-Message rongcloud-clearfix {%if(this.list[index].messageDirection == 1){%} {%\'rongcloud-Message-send\'%} {%}%}" id="rcs-templte-message-text">\n        <div>\n            <div class="rongcloud-Message-header"><img class="rongcloud-img rongcloud-Message-avatar rongcloud-avatar" src="{%if(this.list[index].messageDirection != 1){%} {%if(this.list[index].content.user.icon){%}{%this.list[index].content.user.icon%}{%}else{%} {%RCS.config.csIcon%} {%}%} {%}else{%} {%RCS.config.userIcon%} {%}%}" alt="">\n                <div class="rongcloud-Message-author rongcloud-clearfix">\n                  <a class="rongcloud-author">{%if(this.list[index].messageDirection != 1){%}{%this.list[index].content.user.name%}{%}else{%} {%\'我\'%} {%}%}</a>\n                </div>\n            </div>\n        </div>\n        <div class="rongcloud-Message-body">\n            <div class="rongcloud-Message-text">\n                <pre class="rongcloud-Message-entry">当前版本暂不支持查看此消息</pre>\n            </div>\n        </div>\n    </div>{%}%}{%}%}\n</div>\n\n\x3c!-- <div class="rongcloud-emptyBox">暂时没有新消息</div> --\x3e',"templates/messageTemplate.html":'\x3c!-- messageTemplate: 一个消息的页面 --\x3e\n\x3c!-- class="rongcloud-audioState"声音消息播放状态\nclass="rongcloud-audioBox" 声音消息容器\n此类名不能被修改 --\x3e\n{%switch(this.messageType){%}{%case \'TextMessage\':%}\n<div class="rongcloud-Message rongcloud-clearfix {%if(this.messageDirection == 1){%} {%\'rongcloud-Message-send\'%} {%}%}" id="rcs-templte-message-text">\n    <div>\n        <div class="rongcloud-Message-header"><img class="rongcloud-img rongcloud-Message-avatar rongcloud-avatar" src="{%if(this.messageDirection != 1){%} {%if(this.content.user.icon){%}{%this.content.user.icon%}{%}else{%} {%RCS.config.csIcon%} {%}%} {%}else{%} {%RCS.config.userIcon%} {%}%}" alt="">\n            <div class="rongcloud-Message-author rongcloud-clearfix">\n              <a class="rongcloud-author">{%if(this.messageDirection != 1){%}{%this.content.user.name%}{%}else{%} {%\'我\'%} {%}%}</a>\n            </div>\n        </div>\n    </div>\n    <div class="rongcloud-Message-body">\n        <div class="rongcloud-Message-text">\n            <pre class="rongcloud-Message-entry">{%this.content.content%}</pre>\n        </div>\n    </div>\n</div>{%break;%}\n{%case \'ImageMessage\':%}\n<div class="rongcloud-Message rongcloud-clearfix {%if(this.messageDirection == 1){%} {%\'rongcloud-Message-send\'%} {%}%}" id="rcs-templte-message-text">\n    <div>\n        <div class="rongcloud-Message-header"><img class="rongcloud-img rongcloud-Message-avatar rongcloud-avatar" src="{%if(this.messageDirection != 1){%} {%if(this.content.user.icon){%}{%this.content.user.icon%}{%}else{%} {%RCS.config.csIcon%} {%}%} {%}else{%} {%RCS.config.userIcon%} {%}%}" alt="">\n            <div class="rongcloud-Message-author rongcloud-clearfix">\n              <a class="rongcloud-author">{%if(this.messageDirection != 1){%}{%this.content.user.name%}{%}else{%} {%\'我\'%} {%}%}</a>\n            </div>\n        </div>\n    </div>\n    <div class="rongcloud-Message-body">\n        <div class="rongcloud-Message-img">\n            <span class="rongcloud-Message-entry">\n                <a onclick="RCS.viewImage(event)" class="cursor-pointer" data-img="{%this.content.imageUri%}">\n                    <img src="{%this.content.imageUri%}" onload="RCS.scrollBottom()" data-img="{%this.content.imageUri%}">\n                </a>\n            </span>\n        </div>\n    </div>\n</div>{%break;%}\n{%case \'FileMessage\':%}\n<div class="rongcloud-Message rongcloud-clearfix {%if(this.messageDirection == 1){%} {%\'rongcloud-Message-send\'%} {%}%}" id="rcs-templte-message-text">\n    <div>\n        <div class="rongcloud-Message-header"><img class="rongcloud-img rongcloud-Message-avatar rongcloud-avatar" src="{%if(this.messageDirection != 1){%} {%if(this.content.user.icon){%}{%this.content.user.icon%}{%}else{%} {%RCS.config.csIcon%} {%}%} {%}else{%} {%RCS.config.userIcon%} {%}%}" alt="">\n            <div class="rongcloud-Message-author rongcloud-clearfix">\n              <a class="rongcloud-author">{%if(this.messageDirection != 1){%}{%this.content.user.name%}{%}else{%} {%\'我\'%} {%}%}</a>\n            </div>\n        </div>\n    </div>\n    <div class="rongcloud-Message-body">\n        <div class="rongcloud-Message-file">\n            <div class="rongcloud-sprite rongcloud-file-icon"></div>\n            <div class="rongcloud-file-name">{%this.content.name%}</div>\n            <div class="rongcloud-file-size">{%this.content.size%}</div>\n            <a class="rongcloud-sprite rongcloud-file-download" href="{%this.content.fileUrl%}" download="{%this.content.name%}"></a>\n        </div>\n    </div>\n</div>{%break;%}\n{%case \'VoiceMessage\':%}\n<div class="rongcloud-Message rongcloud-clearfix {%if(this.messageDirection == 1){%} {%\'rongcloud-Message-send\'%} {%}%}" id="rcs-templte-message-text">\n    <div>\n        <div class="rongcloud-Message-header"><img class="rongcloud-img rongcloud-Message-avatar rongcloud-avatar" src="{%if(this.messageDirection != 1){%} {%if(this.content.user.icon){%}{%this.content.user.icon%}{%}else{%} {%RCS.config.csIcon%} {%}%} {%}else{%} {%RCS.config.userIcon%} {%}%}" alt="">\n            <div class="rongcloud-Message-author rongcloud-clearfix">\n              <a class="rongcloud-author">{%if(this.messageDirection != 1){%}{%this.content.user.name%}{%}else{%} {%\'我\'%} {%}%}</a>\n            </div>\n        </div>\n    </div>\n    <div class="rongcloud-Message-body">\n        <div class="rongcloud-Message-audio">\n            <span class="rongcloud-Message-entry">\n                {%if(this.messageDirection == 1){%}\n                    <div style="display:inline-block;">\n                        <span class="rongcloud-audioTimer">{%Math.ceil(this.content.duration || this.content.duration.length / 1024)%}\'\'</span>\n                    </div>\n                    <span class="rongcloud-r-audioBox rongcloud-clearfix" onclick=\'RCS.play(event, {%JSON.stringify(this.content)%})\'>\n                        <i></i><i></i><i></i>\n                    </span>\n                {%}else{%}\n                    <span class="rongcloud-audioBox rongcloud-clearfix" onclick=\'RCS.play(event, {%JSON.stringify(this.content)%})\'>\n                        <i></i><i></i><i></i>\n                    </span>\n                    <div style="display:inline-block;">\n                        <span class="rongcloud-audioTimer">{%Math.ceil(this.content.duration || this.content.duration.length / 1024)%}\'\'</span>\n                        <span class="rongcloud-audioState"></span>\n                    </div>\n                {%}%}\n            </span>\n        </div>\n    </div>\n</div>{%break;%}\n{%case \'TimeMessage\':%}\n<div class="rongcloud-Messages-date">\n    <b>{%this.sentTime%}</b>\n</div>{%break;%}\n{%case \'InformationNotificationMessage\':%}\n<div class="rongcloud-sys-tips">\n    <span>{%this.content.message%}</span>\n</div>{%break;%}\n{%case \'AlertMessage\':%}\n<div class="rongcloud-sys-tips">\n    <span>{%this.content.content%}</span>\n</div>{%break;%}\n{%case \'SightMessage\': %}\n<div class="rongcloud-Message rongcloud-clearfix {%if(this.messageDirection == 1){%} {%\'rongcloud-Message-send\'%} {%}%}" id="rcs-templte-message-text">\n    <div>\n        <div class="rongcloud-Message-header"><img class="rongcloud-img rongcloud-Message-avatar rongcloud-avatar" src="{%if(this.messageDirection != 1){%} {%if(this.content.user.icon){%}{%this.content.user.icon%}{%}else{%} {%RCS.config.csIcon%} {%}%} {%}else{%} {%RCS.config.userIcon%} {%}%}" alt="">\n            <div class="rongcloud-Message-author rongcloud-clearfix">\n              <a class="rongcloud-author">{%if(this.messageDirection != 1){%}{%this.content.user.name%}{%}else{%} {%\'我\'%} {%}%}</a>\n            </div>\n        </div>\n    </div>\n    <div class="rongcloud-Message-body">\n        <div class="rongcloud-Message-sight" onclick="RCS.playVideo(event)">\n            <video poster="{% \'data:image/jpg;base64,\' + this.content.content %}" src="{% this.content.sightUrl %}"></video>\n            <div class="play-btn"></div>\n        </div>\n    </div>\n</div>\n{%break;%}\n{%default: %}\n<div class="rongcloud-Message rongcloud-clearfix {%if(this.messageDirection == 1){%} {%\'rongcloud-Message-send\'%} {%}%}" id="rcs-templte-message-text">\n    <div>\n        <div class="rongcloud-Message-header"><img class="rongcloud-img rongcloud-Message-avatar rongcloud-avatar" src="{%if(this.messageDirection != 1){%} {%if(this.content.user.icon){%}{%this.content.user.icon%}{%}else{%} {%RCS.config.csIcon%} {%}%} {%}else{%} {%RCS.config.userIcon%} {%}%}" alt="">\n            <div class="rongcloud-Message-author rongcloud-clearfix">\n              <a class="rongcloud-author">{%if(this.messageDirection != 1){%}{%this.content.user.name%}{%}else{%} {%\'我\'%} {%}%}</a>\n            </div>\n        </div>\n    </div>\n    <div class="rongcloud-Message-body">\n        <div class="rongcloud-Message-text">\n            <pre class="rongcloud-Message-entry">当前版本暂不支持查看此消息</pre>\n        </div>\n    </div>\n</div>{%}%}\n',"templates/userInfo.html":'\x3c!-- userInfo: 收集用户信息的页面  \nclass="userInfoModel"收集用户信息页面容器 \n此类名不能被修改\n--\x3e\n<div class="rongcloud-layermbox userInfoModel">\n    <div class="rongcloud-laymshade"></div>\n    <div class="rongcloud-layermmain">\n        <div class="rongcloud-section">\n            <div class="rongcloud-layermchild rongcloud-collectuserinfo">\n                <form name=\'userinfo\' novalidate="true">\n                    <div class="rongcloud-layer-body">\n                        <div class="rongcloud-collectuserinfo-title">你好，客服邀请您填写如下内容</div>\n                        <a class="rongcloud-layer-close" onclick="RCS.userInfoClose()">×</a>\n                        {%for(var index in this.list){%}\n                        <div class="rongcloud-form-item">\n                            <label class="rongcloud-form-label {%if(this.list[index].required == 1){%}{%\'rongcloud-require\'%}{%}%}">{%this.list[index].label%}：</label>\n                            {%switch(this.list[index].type){%}{%case \'input\':%}\n                            <input class="rongcloud-inputtext" type="text" name="{%this.list[index].name%}" data-label="{%this.list[index].label%}" data-pattern="{%this.list[index].rule%}" placeholder="{%this.list[index].defaultText%}" onblur="RCS.validateUserInfo(event)" {%if(this.list[index].required == 1){%}{%\'data-required = required\'%}{%}%}></input>{%break;%}{%case \'textarea\':%}\n                            <textarea name="{%this.list[index].name%}" placeholder="{%this.list[index].defaultText%}" data-label="{%this.list[index].label%}" data-pattern="{%this.list[index].rule%}" onblur="RCS.validateUserInfo(event)"></textarea>{%break;%}{%}%}\n                            <div class="rongcloud-form-error" style="display: none;"></div>\n                        </div>{%}%}\n                    </div>\n                    <div class="rongcloud-foot">\n                        <button class="rongcloud-btn" onclick="RCS.userInfoConfirm(event)">提交</button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    </div>\n</div>'};